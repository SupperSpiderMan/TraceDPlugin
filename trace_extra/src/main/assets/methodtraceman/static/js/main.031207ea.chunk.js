(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){e.exports=a(206)},133:function(e,t,a){},206:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),o=a(6),s=a.n(o),r=(a(133),a(22)),c=a(23),l=a(34),u=a(33),m=a(69),d=a(35),h=!1,f=new(function(){function e(){Object(r.a)(this,e),this.isWebSocketReady=function(){return h},this._receiveMessage=this._receiveMessage.bind(this)}return Object(c.a)(e,[{key:"start",value:function(e){this.ws=new WebSocket("ws://"+window.location.host+"/refresh"),this.ws.addEventListener("open",function(){h=!0,e()}),this.ws.addEventListener("message",this._receiveMessage)}},{key:"sendMessage",value:function(e){this.ws.send(e)}},{key:"_receiveMessage",value:function(e){var t=JSON.parse(e.data);console.log("received message:"+JSON.stringify(e.data)),this.receiveMessageCallback&&(1===t.code?this.receiveMessageCallback(t.data.moduleName,t.data.payload):console.log("Error for biz:",t))}},{key:"setReceiveMessageCallback",value:function(e){this.receiveMessageCallback=e}}]),e}()),p=function(){function e(){Object(r.a)(this,e),this.refreshMock=this.refreshMock.bind(this),this.recvFun=null}return Object(c.a)(e,[{key:"start",value:function(e){this.recvFun=e,setInterval(this.refreshMock,2e3)}},{key:"refreshMock",value:function(){this.recvFun("appInfo",{appName:"I am Name",labels:["label1","label2","label3"]})}}]),e}(),v=a(207),g=a(211),b=a(209),E=a(9),y=(a(134),a(56)),M=v.a.Sider,S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onCollapse=function(e){console.log(e),a.setState({collapsed:e})},a.state={collapsed:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(M,{theme:"dark",collapsedWidth:"0",collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},i.a.createElement("div",null),i.a.createElement(b.b,{style:{marginTop:25},theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},i.a.createElement(b.b.Item,{key:"1",disabled:!1},i.a.createElement(y.b,{to:"/methodCost"},i.a.createElement(E.a,{type:"file"}),i.a.createElement("span",null,"\u65b9\u6cd5\u8017\u65f6")))))}}]),t}(n.Component),C=a(36),T=a(208),I=a(74),_="update_appInfo",w="update_methodcost",k="clear_methodcost",O={AppInfo:null,methodInfoList:[]};var L=Object(I.a)({methodReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object.assign({},e,{methodInfoList:t.value});case k:return Object.assign({},e,{methodInfoList:[]});case _:return Object.assign({},e,{AppInfo:t.value});default:return e}}}),j=Object(I.b)(L,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),R=a(62),F=a(210),D=a(76),P=function(){return{type:k}},x=new(a(124).EventEmitter),H=R.a.Option,N=F.a.Search,A="",V=16,W=function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._refreshData=function(){var e=j.getState().methodReducer.methodInfoList;a.setState({methodCostList:e})},a._filterMethod=function(){var e=a.state.timeFilter,t=a.state.threadFilter;if(e<=0&&t<=0&&!A)return a.state.methodCostList;var n=[];return a.state.methodCostList.forEach(function(a){if(a.costTime>e){var i=a.isMainThread?1:2,o=parseInt(t);-1!==a.name.search(A)&&(o<=0||o===i)&&n.push(a)}}),n},a._getCostTimeColor=function(e){var t="#52c41a";return e>V&&(t="#ff0000"),t},a._handleTimeFilterChange=function(e){a.setState({timeFilter:e})},a._handleThreadFilterChange=function(e){a.setState({threadFilter:e})},a._clickStartMethodCost=function(){a.state.isStartState?(j.dispatch(P()),x.emit("sendMsgToClient",'{"moduleName": "StartMethodCost"}'),g.a.loading("\u5df2\u5f00\u59cb\u7edf\u8ba1\u5168\u90e8\u63d2\u6869\u65b9\u6cd5\u8017\u65f6\uff0c\u8bf7\u5f00\u59cb\u64cd\u4f5c\u624b\u673a...",0)):(g.a.destroy(),x.emit("sendMsgToClient",'{"moduleName": "EndMethodCost"}'),g.a.success("\u5df2\u7ed3\u675f\u7edf\u8ba1\u65b9\u6cd5\u8017\u65f6\uff0c\u6b63\u5728\u8f93\u51fa\u5168\u90e8\u65b9\u6cd5\u8017\u65f6....")),a.setState({isStartState:!a.state.isStartState})},a._filterMethodTag=function(e){A=e,a.setState({methodCostList:a.state.methodCostList})};var n=j.getState().methodReducer.methodInfoList;return a.state={methodCostList:n,timeFilter:-1,threadFilter:-1,isStartState:!0},a.unsubscribe=j.subscribe(a._refreshData),g.a.config({top:"40%"}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this,t=this._filterMethod(),a=this.state.isStartState?"\u5f00\u59cb\u65b9\u6cd5\u8017\u65f6\u7edf\u8ba1":"\u7ed3\u675f\u65b9\u6cd5\u8017\u65f6\u7edf\u8ba1",n=this.state.isStartState?"danger":"primary";return i.a.createElement("div",{style:{height:"100%"}},i.a.createElement("div",{style:{height:"50px"}},i.a.createElement(D.a,{type:n,ghost:!0,style:{marginLeft:20,width:"150px"},onClick:function(){return e._clickStartMethodCost()}},a),i.a.createElement(R.a,{defaultValue:"\u8017\u65f6\u7b5b\u9009",style:{width:150,marginLeft:20},onChange:function(t){return e._handleTimeFilterChange(t)}},i.a.createElement(H,{value:"-1"}," \u65e0\u7b5b\u9009 "),i.a.createElement(H,{value:"5"}," > 5ms "),i.a.createElement(H,{value:"10"}," > 10ms "),i.a.createElement(H,{value:"16"}," > 16ms"),i.a.createElement(H,{value:"20"}," > 20ms"),i.a.createElement(H,{value:"25"}," > 25ms"),i.a.createElement(H,{value:"32"}," > 32ms"),i.a.createElement(H,{value:"50"}," > 50ms"),i.a.createElement(H,{value:"75"}," > 75ms"),i.a.createElement(H,{value:"100"}," > 100ms")),i.a.createElement(R.a,{defaultValue:"\u7ebf\u7a0b\u7b5b\u9009",style:{width:150,marginLeft:20},onChange:function(t){return e._handleThreadFilterChange(t)}},i.a.createElement(H,{value:"-1"}," \u5168\u90e8\u7ebf\u7a0b "),i.a.createElement(H,{value:"1"},"  \u4e3b\u7ebf\u7a0b "),i.a.createElement(H,{value:"2"}," \u975e\u4e3b\u7ebf\u7a0b ")),i.a.createElement(N,{style:{marginLeft:20,width:"300px"},placeholder:"\u8f93\u5165\u65b9\u6cd5\u540d\u79f0",onSearch:function(t){e._filterMethodTag(t)},enterButton:!0}),i.a.createElement(D.a,{type:"primary",style:{marginLeft:20,width:"80px"},onClick:function(){j.dispatch(P())}},"\u6e05\u7a7a")),i.a.createElement("div",{style:{height:"100%",overflow:"scroll"}},i.a.createElement(T.a,{style:{marginTop:15},itemLayout:"vertical",dataSource:t,renderItem:function(t,a){return i.a.createElement(T.a.Item,{className:"listItem",key:a},i.a.createElement("div",{style:{width:"100%",height:"30px",display:"flex",flexDirection:"column",justifyContent:"center"}},i.a.createElement("div",null,i.a.createElement("div",{style:{float:"left",width:"90%"}},i.a.createElement("span",{style:{fontSize:13,color:"#ACB4BF"}},t.isMainThread?"[\u4e3b\u7ebf\u7a0b]":"[\u975e\u4e3b\u7ebf\u7a0b]"),i.a.createElement("span",{style:{fontSize:15,color:"#0F294D"}},t.name)),i.a.createElement("div",{style:{float:"right",width:"10%"}},i.a.createElement(E.a,{type:t.costTime<=V?"check-circle":"exclamation-circle",theme:"twoTone",twoToneColor:t.costTime<=V?"#52c41a":"#ff0000",style:{marginRight:"10px"}}),i.a.createElement("span",{style:{fontSize:16,color:"".concat(e._getCostTimeColor(t.costTime))}},t.costTime,"ms")))))}})))}}]),t}(n.Component),B=v.a.Content,U=v.a.Footer,z=function(e){return i.a.createElement(v.a,null,i.a.createElement(B,{style:{margin:"0 0"}},i.a.createElement("div",{style:{padding:24,background:"#fff",height:"85vh",overflow:"hidden"}},i.a.createElement(C.a,{exact:!0,path:"/index.html",component:W}))),i.a.createElement(U,{style:{textAlign:"center"}},"CopyRight\xa92019 DavidSu. All rights reserved."))},$=a(212),J=["magenta","blue","green","orange","lime","cyan"],X=function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._refreshData=function(){var e=j.getState().methodReducer.AppInfo;a.setState({tags:e})},a.getTagViews=function(){var e=a.state.tags,t=[],n=0;return e&&e.forEach(function(e){var a=J[n%J.length];t.push(i.a.createElement($.a,{style:{marginBottom:8},color:a},e)),n++}),t};var n=j.getState().methodReducer.AppInfo;return a.state={tags:n},a.unsubscribe=j.subscribe(a._refreshData),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return i.a.createElement("div",{style:{marginLeft:25,display:"inline"}},this.getTagViews())}}]),t}(n.Component),G=v.a.Header,K=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._registerEventBus=function(){x.addListener("sendMsgToClient",function(e){console.log(e);try{f.start(function(t){f.sendMessage(e)})}catch(t){g.a.error("MethodTraceMan\u4e0e\u624b\u673a\u5ba2\u6237\u7aef\u672a\u8fde\u63a5\u5b8c\u6bd5\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")}})},a._testData=function(){setTimeout(function(){a._onReceiveMessage("appInfo",["\u673a\u578b\uff1asamsung SM-G9700","\u7cfb\u7edf\u7248\u672c\uff1a28","\u5305\u540d\uff1actrip.english.debug","App\u7248\u672c\uff1a7.1.0","UID\uff1aE451995153","ClientID\uff1a37002118410181244263"])},3e3),setTimeout(function(){a._onReceiveMessage("methodCost",[{costTime:1,endPos:3,isMainThread:!0,name:"com.ctrip.ibu.hotel.module.main.MainSearchInfoHelper.getInstance.()Lcom.ctrip.ibu.hotel.module.main.MainSearchInfoHelper;",startPos:0},{costTime:15,endPos:45,isMainThread:!0,name:"com.ctrip.ibu.hotel.module.main.HotelMainActivity.lambda$gotoHotelList$11.(IILandroid.content.Intent;)V",startPos:6},{costTime:14,endPos:44,isMainThread:!0,name:"com.ctrip.ibu.hotel.module.main.HotelMainPresenter.onHotelsActivityResult.(Landroid.content.Intent;)V",startPos:7},{costTime:1,endPos:19,isMainThread:!0,name:"com.ctrip.ibu.hotel.module.main.MainSearchInfoHelper.getAdultNum.()I",startPos:18},{costTime:6,endPos:41,isMainThread:!0,name:"com.ctrip.ibu.hotel.module.main.MainSearchInfoHelper.onRoomGuestChange.(IILjava.util.List;)V",startPos:30},{costTime:1,endPos:3,isMainThread:!0,name:"com.ctrip.ibu.hotel.module.main.MainSearchInfoHelper.getInstance.()Lcom.ctrip.ibu.hotel.module.main.MainSearchInfoHelper;",startPos:0},{costTime:15,endPos:45,isMainThread:!0,name:"com.ctrip.ibu.hotel.module.main.HotelMainActivity.lambda$gotoHotelList$11.(IILandroid.content.Intent;)V",startPos:6}])},5e3)},a._onReceiveMessage=a._onReceiveMessage.bind(Object(m.a)(a)),a.mock=new p,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){f.setReceiveMessageCallback(this._onReceiveMessage),f.start(function(e){f.sendMessage('{"moduleName": "OnlineMessage"}')}),this._registerEventBus()}},{key:"componentWillUnmount",value:function(){x.removeAllListeners()}},{key:"_onReceiveMessage",value:function(e,t){switch(e){case"appInfo":j.dispatch((a=t.appInfo,{type:_,value:a}));break;case"methodCost":j.dispatch(function(e){return{type:w,value:e}}(t))}var a}},{key:"render",value:function(){return i.a.createElement(v.a,{style:{minHeight:"100vh"}},i.a.createElement(G,{style:{paddingLeft:"10px"}},i.a.createElement("span",{style:{fontWeight:"bolder",color:"#fff",fontSize:30}},"MethodTraceMan."),i.a.createElement(X,null)),i.a.createElement(v.a,null,i.a.createElement(y.a,null,i.a.createElement(S,null),i.a.createElement(z,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[128,1,2]]]);
//# sourceMappingURL=main.031207ea.chunk.js.map